"use strict";!function(a){var n={};function i(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return a[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=a,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([,,function(t,e,a){t.exports=a(3)},function(t,e){var s;s=jQuery,void 0!==window.vc&&(window.nKTabsView=vc.shortcode_view.extend({new_tab_adding:!1,events:{"click .add_tab":"addTab","click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone"},initialize:function(t){window.nKTabsView.__super__.initialize.call(this,t),_.bindAll(this,"stopSorting")},render:function(){return window.nKTabsView.__super__.render.call(this),this.$tabs=this.$el.find(".wpb_tabs_holder"),this.$tabs.find(".tab-pane").remove(),this.createAddTabButton(),this},ready:function(t){window.nKTabsView.__super__.ready.call(this,t)},createAddTabButton:function(){var t=+new Date+"-"+Math.floor(11*Math.random());this.$tabs.append('<div id="new-tab-'+t+'" class="new_element_button"></div>'),this.$add_button=s('<li class="add_tab_block"><a href="#new-tab-'+t+'" class="add_tab" title="'+window.i18nLocale.add_tab+'">+</a></li>').appendTo(this.$tabs.find(".tabs_controls"))},addTab:function(t){if(t.preventDefault(),!this.hasUserAccess())return!1;this.new_tab_adding=!0;var e=window.i18nLocale.tab,a=this.$tabs.find("[data-element_type=nk_tab]").length,n=+new Date+"-"+a+"-"+Math.floor(11*Math.random());return vc.shortcodes.create({shortcode:"nk_tab",params:{title:e,tab_id:n},parent_id:this.model.id}),!1},stopSorting:function(t,e){var a;this.$tabs.find("ul.tabs_controls li:not(.add_tab_block)").each(function(t){s(this).find("a").attr("href").replace("#",""),a=vc.shortcodes.get(s("[id="+s(this).attr("aria-controls")+"]").data("model-id")),vc.storage.lock(),a.save({order:s(this).index()})}),a&&a.save()},changedContent:function(t){var e=t.model.get("params");if(this.$tabs.hasClass("ui-tabs")||(this.$tabs.tabs({select:function(t,e){return!s(e.tab).hasClass("add_tab")}}),this.$tabs.find(".ui-tabs-nav").prependTo(this.$tabs),this.hasUserAccess()&&this.$tabs.find(".ui-tabs-nav").sortable({axis:"vc_tour"==this.$tabs.closest("[data-element_type]").data("element_type")?"y":"x",update:this.stopSorting,items:"> li:not(.add_tab_block)"})),!0===t.model.get("cloned")){t.model.get("cloned_from");var a=s(".tabs_controls > .add_tab_block",this.$content),n=s("<li><a href='#tab-"+e.tab_id+"'>"+e.title+"</a></li>").insertBefore(a);this.$tabs.tabs("refresh"),this.$tabs.tabs("option","active",n.index())}else s("<li><a href='#tab-"+e.tab_id+"'>"+e.title+"</a></li>").insertBefore(this.$add_button),this.$tabs.tabs("refresh"),this.$tabs.tabs("option","active",this.new_tab_adding?s(".ui-tabs-nav li",this.$content).length-2:0);this.new_tab_adding=!1},cloneModel:function(t,e,a){var n,i,o,s;return n=_.isBoolean(a)&&!0===a?t.get("order"):parseFloat(t.get("order"))+vc.clone_index,o=_.extend({},t.get("params")),"nk_tab"===(s=t.get("shortcode"))&&_.extend(o,{tab_id:+new Date+"-"+this.$tabs.find("[data-element-type=nk_tab]").length+"-"+Math.floor(11*Math.random())}),i=vc.shortcodes.create({shortcode:s,id:vc_guid(),parent_id:e,order:n,cloned:"nk_tab"!==s,cloned_from:t.toJSON(),params:o}),_.each(vc.shortcodes.where({parent_id:t.id}),function(t){this.cloneModel(t,i.get("id"),!0)},this),i}}),window.nKTabView=window.VcColumnView.extend({events:{"click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-prepend":"addElement","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone","click > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},render:function(){var t=this.model.get("params");return window.nKTabView.__super__.render.call(this),t.tab_id||(t.tab_id=+new Date+"-"+Math.floor(11*Math.random()),this.model.save("params",t)),this.id="tab-"+t.tab_id,this.$el.attr("id",this.id),this},ready:function(t){return window.nKTabView.__super__.ready.call(this,t),this.$tabs=this.$el.closest(".wpb_tabs_holder"),this.model.get("params"),this},changeShortcodeParams:function(t){var e;window.nKTabView.__super__.changeShortcodeParams.call(this,t),e=t.get("params"),_.isObject(e)&&_.isString(e.title)&&_.isString(e.tab_id)&&s('.ui-tabs-nav [href="#tab-'+e.tab_id+'"]').text(e.title)},deleteShortcode:function(t){_.isObject(t)&&t.preventDefault();var e=confirm(window.i18nLocale.press_ok_to_delete_section),a=this.model.get("parent_id");if(!0!==e)return!1;if(this.model.destroy(),!vc.shortcodes.where({parent_id:a}).length)return vc.shortcodes.get(a).destroy(),!1;var n=this.model.get("params"),i=s('[href="#tab-'+n.tab_id+'"]',this.$tabs).parent().index();s('[href="#tab-'+n.tab_id+'"]').parent().remove();var o=this.$tabs.find(".ui-tabs-nav li:not(.add_tab_block)").length;0<o&&this.$tabs.tabs("refresh"),i<o?this.$tabs.tabs("option","active",i):0<o&&this.$tabs.tabs("option","active",o-1)},cloneModel:function(t,e,a){var n,i,o,s;return n=_.isBoolean(a)&&!0===a?t.get("order"):parseFloat(t.get("order"))+vc.clone_index,o=_.extend({},t.get("params")),"nk_tab"===(s=t.get("shortcode"))&&_.extend(o,{tab_id:+new Date+"-"+this.$tabs.find("[data-element_type=nk_tab]").length+"-"+Math.floor(11*Math.random())}),i=vc.shortcodes.create({shortcode:s,parent_id:e,order:n,cloned:!0,cloned_from:t.toJSON(),params:o}),_.each(vc.shortcodes.where({parent_id:t.id}),function(t){this.cloneModel(t,i.get("id"),!0)},this),i}}))}]);